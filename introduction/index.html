<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Introduction - Wiggum</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Introduction";
    var mkdocs_page_input_path = "introduction.md";
    var mkdocs_page_url = "/introduction/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Wiggum</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Introduction</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#flow">Flow</a></li>
                
            
                <li class="toctree-l3"><a href="#users">Users</a></li>
                
            
                <li class="toctree-l3"><a href="#permissions">Permissions</a></li>
                
            
                <li class="toctree-l3"><a href="#apps">Apps</a></li>
                
            
                <li class="toctree-l3"><a href="#wiggum-philosophy">Wiggum philosophy</a></li>
                
            
                <li class="toctree-l3"><a href="#wiggum-token">Wiggum token</a></li>
                
            
                <li class="toctree-l3"><a href="#applications">Applications</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../quick-start/">Quick-start</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Installation</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../install/manual-install/">Manual</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../install/docker-install/">Docker</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Settings</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../settings/django/">Django</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../settings/wiggum/">Wiggum</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../authentication/">Authentication</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../authorization/">Authorization</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Utils</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../utils/api/">API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../utils/admin/">Admin panel</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../utils/sfa/">SFA</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../utils/impersonation/">Impersonation</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../metrics/">Metrics</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Customization</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../custom/introduction/">Introduction</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../contributing/">Contributing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../about/">About</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Wiggum</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Introduction</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="flow">Flow<a class="headerlink" href="#flow" title="Permanent link"></a></h1>
<p>Wiggum has a simple objective, the flow is very easy to understand as you see
in this image, the user logins on wiggum and then a cookie is set to that user
for a domain or wildcard domain. Now the user has a valid JWT token that
applications can check if the user is authenticated. So the user authentication
is stateless</p>
<p><img alt="Wiggum flow" src="../img/wiggum.png" /></p>
<p>When wiggum authenticates a user the applications that use wiggum as a login system
must trust wiggum, this means that if a user has a wiggum JWT valid token, we can say
that the user is logged in.</p>
<h1 id="users">Users<a class="headerlink" href="#users" title="Permanent link"></a></h1>
<p>Wiggum login is based on users, to be more exact, wiggum has a model named <code>User</code>
The user has very few attributes:</p>
<ul>
<li>ID: A wiggum ID (unique) (must)</li>
<li>Username: A user username (unique) (must)</li>
<li>email: A user email (unique) (must)</li>
<li>First name: A user first name (not needed)</li>
<li>Last name: A user last name (not needed)</li>
<li>Password: The user password (must)</li>
</ul>
<p>You can create a new user with the [admin] panel that wiggum has or with the
wiggum [API]</p>
<p>[admin] utils/admin
[API] utils/api</p>
<h1 id="permissions">Permissions<a class="headerlink" href="#permissions" title="Permanent link"></a></h1>
<p>Permissions are linked with the User model, ths model specifies what are the user
rights.</p>
<p>Sometimes may only be needed that the user is authenticated, but other times we
need to difference an user from other user. The system used in Wiggum is simple,
a right or permission is a simple string. Usually with dotted notation. For example:</p>
<pre><code>backoffice.user
backoffice.editor
wiggum.all
wiggum.impersonate
photos.production.editor
photos.internal.admin
</code></pre>

<p>A user has a list of permission linked to it.</p>
<h1 id="apps">Apps<a class="headerlink" href="#apps" title="Permanent link"></a></h1>
<p>Apps are mainly used to use the API, it has nothing to do with . Apps have a token linked to it, this token is used as the API authentication mechanism.</p>
<h1 id="wiggum-philosophy">Wiggum philosophy<a class="headerlink" href="#wiggum-philosophy" title="Permanent link"></a></h1>
<p>Many people can be tempted to start adding stuff to the user model, but this is
wrong. Wiggum is only an auth system, Wiggum doesn't need to know anything else
about the user, so, your user profile should reside in a centralized app, in
multiple apps... depends on the architecture that you have.</p>
<p>In order to link in a way the wiggum user and the user information (profile) of
other applications, you will need to use one of the unique fields that wiggum users
have: <code>email</code> or <code>username</code></p>
<h1 id="wiggum-token">Wiggum token<a class="headerlink" href="#wiggum-token" title="Permanent link"></a></h1>
<p>The signed wiggum token is a standard JWT</p>
<pre><code>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLjEsImlzcyI6IndpZ2d1bS1iZXRhIiwiZXhwIjoxNDU3MjgwNDg3LCJuYmYiOjE0NTcwMjEyNzIsInVzZXIiOnsidXNlcm5hbWUiOiJzbG9rIiwiZW1haWwiOiJzbG9rNjlAZ21haWwuY29tIiwiaWQiOjEsImZpcnN0X25hbWUiOiJYYWJpZXIiLCJsYXN0X25hbWUiOiJMYXJyYWtvZXR4ZWEifSwiaWF0IjoxNDU3MDIxMjg3fQ.RrU09evYLEXvMbLqSzsbA4EqCnYH4PFQy3Jlm6MRNelIam_oEVMn5qpcQHcno9RhqL4wO6BrTu6gHPfjnZzmPA6k5RX8fQE3pdN1yfwWiLJFQ4vPTcYcV2wr24xJ7Ye8H3OVdoMkhn98M1lgQ-UcFoNMkWsDhgn8-k31IamhO6yrvEjj_l1-CWIeUBJ_Q5tCRHea0QW3mIkXCtAhjhUhp0ZnNGo52fmc2X7NqKiKJMjSYYh7DH-skd_hUtE4PiFZfHwgbvb49CiKx0PEd4vyEqpf1qiMpkT-wRVIKzFmxoQ-qiW8Dedb4WNBjGKvXWshd21VuctshpdcVbpPLnJG1A
</code></pre>

<p>Decoded</p>
<pre><code class="javascript">{
    &quot;version&quot;: 1.1,
    &quot;iss&quot;: &quot;wiggum-beta&quot;,
    &quot;exp&quot;: 1457280487,
    &quot;nbf&quot;: 1457021272,
    &quot;user&quot;: {
        &quot;username&quot;: &quot;slok&quot;,
        &quot;email&quot;: &quot;slok69@gmail.com&quot;,
        &quot;id&quot;: 1,
        &quot;first_name&quot;: &quot;Xabier&quot;,
        &quot;last_name&quot;: &quot;Larrakoetxea&quot;
    },
    &quot;iat&quot;: 1457021287
}
</code></pre>

<p>This object above will be the source of information the apps that trust wiggum will
use to obtain the logged user</p>
<h1 id="applications">Applications<a class="headerlink" href="#applications" title="Permanent link"></a></h1>
<p>Once the cookie with the JWT token is on users browser, the cookie will be
attached on each request, this stateless authentication system makes that applications
don't need to maintain anything about user authentication in its session.</p>
<p>With the JWT cookie on users session is job of the application to check the
cookie token signature and the user permissions so it can deny the access to the user or not,
We will see this in an <a href="../example">example</a></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../quick-start/" class="btn btn-neutral float-right" title="Quick-start">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../quick-start/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
